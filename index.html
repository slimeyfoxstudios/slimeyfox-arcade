<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Slimey Fox Arcade – Octaroid</title>
<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
  font-family: Arial, sans-serif;
  color: white;
  text-align: center;
}
canvas {
  display: block;
  margin: 10px auto;
  background: #000;
  border: 2px solid #333;
}
#leaderboard {
  margin: 10px auto;
  width: 320px;
  background: #111;
  padding: 10px;
  border-radius: 8px;
}
#leaderboard h3 {
  margin: 0 0 5px 0;
  font-size: 18px;
  color: #0ff;
}
#leaderboard ol {
  padding-left: 20px;
  text-align: left;
}
</style>
</head>
<body>

<h2>Slimey Fox Arcade – Octaroid</h2>
<canvas id="game" width="800" height="600"></canvas>

<div id="leaderboard">
  <h3>Top 10 High Scores</h3>
  <ol id="scoresList"></ol>
</div>

<script>
// -----------------------------
// Setup
// -----------------------------
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const ship = {
  x: canvas.width/2,
  y: canvas.height/2,
  angle: 0,
  size: 20,
  dx: 0,
  dy: 0,
  color: "lime",
  lives: 5
};

let bullets = [];
let asteroids = [];
let score = 0;
let gameOver = false;
let startTime = Date.now();
let difficultyTimer = 0;
let spawnInterval = 5000; // spawn new asteroid every 5 sec initially

// -----------------------------
// Sounds - Web Audio API
// -----------------------------
const AudioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(frequency, duration, type="sine", volume=0.1) {
  const osc = AudioCtx.createOscillator();
  const gain = AudioCtx.createGain();
  osc.frequency.value = frequency;
  osc.type = type;
  gain.gain.value = volume;
  osc.connect(gain);
  gain.connect(AudioCtx.destination);
  osc.start();
  osc.stop(AudioCtx.currentTime + duration);
}

// Background hum
const humOsc = AudioCtx.createOscillator();
const humGain = AudioCtx.createGain();
humOsc.type = "sine";
humOsc.frequency.value = 55;
humGain.gain.value = 0.02;
humOsc.connect(humGain);
humGain.connect(AudioCtx.destination);
humOsc.start();

// -----------------------------
// Controls
// -----------------------------
const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// -----------------------------
// Bullets
// -----------------------------
function shoot() {
  const speed = 8;
  bullets.push({
    x: ship.x + Math.cos(ship.angle)*ship.size/2,
    y: ship.y + Math.sin(ship.angle)*ship.size/2,
    dx: Math.cos(ship.angle)*speed,
    dy: Math.sin(ship.angle)*speed,
    size: 4
  });
  beep(800,0.05,"square",0.15); // Laser sound
}

// -----------------------------
// Asteroids
// -----------------------------
function createAsteroid(x, y, size=40, speedFactor=1) {
  asteroids.push({
    x: x,
    y: y,
    dx: (Math.random()*2-1)*1.5*speedFactor,
    dy: (Math.random()*2-1)*1.5*speedFactor,
    size: size
  });
}

function splitAsteroid(a) {
  if (a.size > 15) {
    createAsteroid(a.x, a.y, a.size/2, 1.2);
    createAsteroid(a.x, a.y, a.size/2, 1.2);
  }
}

// Spawn initial asteroids
for(let i=0;i<6;i++) createAsteroid(Math.random()*canvas.width, Math.random()*canvas.height, 40);

// -----------------------------
// Collision
// -----------------------------
function checkCollision(ax, ay, ar, bx, by, br) {
  const dx = ax-bx;
  const dy = ay-by;
  const distance = Math.sqrt(dx*dx + dy*dy);
  return distance < ar+br;
}

// -----------------------------
// High Score System
// -----------------------------
function getHighScores() {
  return JSON.parse(localStorage.getItem("highScores") || "[]");
}

function saveHighScores(scores) {
  localStorage.setItem("highScores", JSON.stringify(scores));
}

function updateLeaderboard() {
  const scores = getHighScores();
  const list = document.getElementById("scoresList");
  list.innerHTML = "";
  scores.forEach(s => {
    const li = document.createElement("li");
    li.textContent = `${s.name} - ${s.score}`;
    list.appendChild(li);
  });
}

function checkHighScore() {
  const scores = getHighScores();
  if (scores.length < 10 || score > scores[scores.length-1].score) {
    const name = prompt("New High Score! Enter your name:","Player");
    if (name) {
      scores.push({name:name,score:score});
      scores.sort((a,b)=>b.score-a.score);
      if (scores.length>
